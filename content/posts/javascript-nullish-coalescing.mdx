---
title: 'JavaScript - Nullish coalescing & Optional chaining'
category: 'JavaScript'
publishedAt: '01-05-2020'
isPublished: true
popular: false
image: '/images/javascript-nullish-coalescing/javascript-nullish-coalescing.png'
excerpt: 'Specyfikacja ECMAScript cay czas si rozwija, powstaj nowe ciekawe featury. Jaki czas temu, zostay zaproponowane dwa nowe: nullish coalescing i optional chaining'
---

Specyfikacja ECMAScript cay czas si rozwija, powstaj nowe ciekawe featury. Jaki czas temu, zostay
zaproponowane, przez [Gabriela Isenberga](https://twitter.com/the_gisenberg), dwa nowe: **nullish coalescing** i **optional chaining**. Dzi przyjrzymy im si troch bli偶ej.

Zaczynamy!

## Nullish coalescing

Jest to logiczny operator, kt贸ry zwraca warto po prawej stronie od kropki(operand), jeli ta po lewej jest `null` lub `undefined`.

### Operator OR(||)

Przypomnienie, operator **OR** zwraca warto kt贸ra jest prawdziwa. Sp贸jrzmy na przykadzie:

```js
undefined || 'Hello world!'; // 'Hello world!'
[1, 2, 3] || null; // [1,2,3]
'' || 27; //27
```

### Nullish coalescing i operator ??

Operator `??`, r贸偶ni si tym od operatora `||`, 偶e nie bierze pod uwag wszystkich wartoci `falsy`, a jedynie `null` i `undefined`.

```js
let userName = ''; // falsy value

const newUser = userName || 'Karol'; //Karol
const anotherUser = userName ?? 'Maciek'; // '', poniewa偶 warto nie jest null/undefined
```

Okej, ale jak dziaa ten cay Nullish coalescing operator? Poni偶sze wyra偶enia dziaaj w ten sam spos贸b.

```js
someValue ?? anotherValue;
someValue !== undefined && someValue !== null ? someValue : anotherValue;
```

Spr贸bujmy poczy znany nam ju偶 operator **OR** z operatorem `??`.

```js
null || undefined ?? "Karol"; // co poszo nie tak - SyntaxError
(null || undefined) ?? "Karol" // Karol
```

### Operator ?? w praktyce

Stw贸rzmy funkcj, kt贸ra bdzie przyjmowaa objekt u偶ytkownika jako parametr, jeli jego waciwo **userName** bdzie `null` lub `undefined` zwr贸cimy imi **Karol**.

```js
const getUserName = (user) => user.userName ?? 'Karol';
```

Mo偶emy u偶y r贸wnie偶 destrukturyzacji w poczeniu z defaultow wartoci():

```js
const getUserName = ({ userName = 'Karol' }) => userName;
```

## Optional chaining

Jak to dziaa? Jeli warto przed znakiem zapytania jest `null` lub `undefined` to zwracamy `undefined`. Jeli chodzi o funkcje, jeli dana funkcja nie istnieje, zwracany jest `undefined`. To tyle, jeli chodzi o teori, przejd藕my do praktyki.

```js
const user = {
  name: 'Maciej',
  email: 'maciej@gmail.com',
  id: 123,
};

const userName = user.favouriteFood?.milk; // undefined
console.log(getUserId?.()); // undefined
let milk = user.favouriteFood && user.favouriteFood.milk; // stary spos贸b
milk = user.favouriteFood?.milk; // nowy spos贸b
```

### Metody, tablice i objekty

Jak wyglda sprawa z metodami obiekt贸w? Bardzo podobnie jak w poprzednich przykadach:

```js
const getUserFavouriteFood = user.getFavouriteFood?.();
```

A co z tablicami i indexami?

```js
const arrayItem = someArray?.[7];
```

Short-circuiting, jeli warto po lewej stronie jest `null`/`undefined`, to operacja nie zostanie wykonana:

```js
const newUser = null;
const userAge = 20;
const incrementedAge = newUser?.[userAge++];

userAge; // 20
```

#### Zagnie偶d偶ony optional chaining

Nasz objekt user:

```js
const user = {
  name: 'Wojtek',
  email: 'wojciechkowalski@gmail.com',
  details: {
    age: 28,
    address: {
      street: 'Mickiewicza',
    },
  },
};
```

Jeli chcielibymy wycign kod pocztowy, przy pomocy **optional chaining** moglibymy to zrobi w taki spos贸b:

```js
const zipCode = user.details?.address?.zipCode;
```

## Nullish coalescing w poczeniu z optional chaining

Nullish coalescing mo偶e by wykorzystany do podania defaultowej wartoci, **po optional chaining**.
U偶yjmy poprzedniego przykadu z kodem pocztowym.

```js
const user = {
  name: 'Wojtek',
  email: 'wojciechkowalski@gmail.com',
  details: {
    age: 28,
    address: {
      street: 'Mickiewicza',
    },
  },
};

const zipCode = user.details?.address?.zipCode ?? '87-100'; // 87-100
```

## Podsumowanie

Mam nadziej, 偶e przybli偶yem Ci zao偶enia stojce za **Nullish coalescing** i **Optional chaining**, jeli chcesz si dowiedzie wicej, mo偶esz zajrze do 藕r贸de, szczeg贸lnie polecam [Dr. Axela Rauschmayera](https://2ality.com/index.html) i oczywicie dokumentacj [MDN](https://developer.mozilla.org/en-US/).

Do usyszenia!

### 殴r贸da

- [2ality - ECMAScript feature: Nullish coalescing for JavaScript](https://2ality.com/2019/08/nullish-coalescing.html)

- [2ality - ECMAScript feature: optional chaining](https://2ality.com/2019/07/optional-chaining.html)

- [MDN - Nullish coalescing operator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator)

- [MDN - Optional chaining](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining)
