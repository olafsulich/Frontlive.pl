---
title: 'Elastyczno komponent贸w w React - kompozycja vs konfiguracja'
category: 'React'
publishedAt: '29-08-2022'
isPublished: true
popular: false
image: '/images/elastyczne-komponenty-react/thumbnail.png'
excerpt: 'Design komponent贸w to wa偶ny aspekt budowania nowoczesnych UI. W jaki spos贸b tworzy wydajne i elastyczne komponenty w React?'
---

Podczas nauki React skupiamy si przede wszystkim na szczeg贸ach technicznych, nic w tym zego. Poznajemy zao偶enia, API biblioteki i cay ekosystem. W tym wszystkim czsto zapominamy o jednej, bardzo wa偶nej rzeczy - **odpowiednim projektowaniu komponent贸w**.

Komponent, czy ca bibliotek komponent贸w mo偶na stworzy na wiele r贸偶nych sposob贸w. Ja przedstawi Ci dzisiaj dwa podstawowe. Pom贸wimy o wadach i zaletach obu rozwiza i o tym, co warto wybra w zale偶noci od przypadku.

## Komponent "Modal"

Zacznijmy od pozornie prostego modala:

<Image src="/images/elastyczne-komponenty-react/modal.png" alt="" />

### Konfiguracja

Pierwsze co przychodzi nam na myl, to stworzenie jednego, generycznego komponentu i przekazanie mu odpowiednich props贸w - **Keep It Simple, Stupid**.

```tsx
<Modal
  open={true}
  onClose={true}
  title="..."
  description="..."
  action={{
    name: '...',
    onClick: () => {},
  }}
/>
```

Przekazalimy stan komponentu i potrzebne wartoci. Mo偶na sirozej - zamykamy zadanie na Jirze i cieszymy siz szybkich efekt贸w 

Za jaki czas przychodzi do nas Project Manager i przekazuje zadanie, w kt贸rym do stworzenia jest kolejny modal. Tym razem nie bdzie tak atwo...

<Image src="/images/elastyczne-komponenty-react/error-modal.png" alt="" />

Poza standardowymi `title` i `description`, mo偶emy zauwa偶y, 偶e zamiast jednego przycisku, s dwa. Dodatkowo, nasz Designer postanowi doda przycisk do zamykania komunikatu. No nic, bierzemy sido pracy!

```tsx
<Modal
  open={true}
  onClose={true}
  header={{
    title: '...',
    icon: <CloseIcon />,
  }}
  description="..."
  actions={[
    {
      name: '...',
      onClick: () => {},
      variant: 'red',
    },
    {
      name: '...',
      onClick: () => {},
      variant: 'gray',
    },
  ]}
/>
```

Nasz komponent zaczyna znaczco rosn - API jest bardzo sztywne i ka偶de odstpstwo od pierwotnego designu bdzie siwizao z przekazywaniem kolejnych props贸w i wariant贸w.

Im wicej props贸w, tym zmniejsza siczytelno. Wraz z rozwojem takiego komponentu, mo偶emy doj do wniosku, 偶e czytelniej bdzie przekazacay **obiekt konfiguracyjny**:

```tsx
<Modal {...modalProps} />
```

Niestety jest to tylko "zalepka" na sedno problemu.

Podsumujmy podejcie oparte na bazie konfiguracji:

### Zalety

- **Przewidywalno**

  API naszego komponentu jest jasne. Wiemy co musimy przekaza, 偶eby komponent dziaa prawidowo.

  Odwalamy cz pracy za programist- przeka偶 mi to i to, a ja dam Ci oczekiwany rezultat. Brak tutaj miejsca na bdy spowodowane nieprzekazaniem wymaganych wartoci.

<Image src="/images/elastyczne-komponenty-react/bezpieczne-propsy.png" alt="" />

### Wady

- **To sinie skaluje**

  Z czasem bd dochodzi kolejne warianty komponentu, elementy, dodatki. Jeli doo偶ymy do tego warunkowe renderowanie, to wyldujemy w kropce. Nasz `JSX` zacznie puchn.

  Stwierdzimy, 偶e czytelniej bdzie przekazywa cay "obiekt konfiguracyjny", ale czy na pewno rozwizuje nasz problem?

<Image src="/images/elastyczne-komponenty-react/obiekt-konfiguracyjny.png" alt="" />

- **Brak elastycznoci**

  Chcemy zmieni uo偶enie pewnych element贸w? Przyciski w danym wariancie powinny by uo偶one nieco inaczej? Jestemy zmuszeni doda kolejne propsy.

  W pewnych przypadkach nie chcemy czego wywietla? Jestemy w stanie to zrobi, ale jakim kosztem? Mo偶emy zapomnie wtedy o "sztywnym" podejciu i trzymaniem programisty "za mord", bo w kocu pewne propsy nie s wymagane.

<Newsletter />

## Kompozycja

We藕my na tapet rozwizanie zupenie inne od pierwotnego. Skorzystajmy z mechanizmu `children` i zamiemy nasze propsy na reu偶ywalne komponenty:

```tsx
<Modal open={true} onClose={true}>
  <Modal.Header>
    <Modal.Title>...</Modal.Title>
    <CloseIcon />
  </Modal.Header>
  <Modal.Description>...</Modal.Description>
  <Modal.ActionsGroup>
    <Modal.Action variant="red" onClick={() => {}}>
      ...
    </Modal.Action>
    <Modal.Action variant="red" onClick={() => {}}>
      ...
    </Modal.Action>
  </Modal.ActionsGroup>
</Modal>
```

> Notacja z kropk jest cakowicie opcjonalna. Jest wykorzystywana czsto przez tw贸rc贸w bibliotek jako pewna konwencja nazewnicza.

Korzystamy tutaj z wyselekcjonowanych komponent贸w, kt贸re sskrojone pod nasz kawaek UI. Ka偶dy puzzel takiej ukadanki mo偶e mie wasne propsy i `children`.

### Zalety

- **Elastyczno**

  Nie chcemy wywietla jakiego komponentu w danej sytuacji? Pyk, robimy warunek w `JSX` i po problemie.

  Chcemy zmieni kolejno wywietlania poszczeg贸lnych element贸w? 呕aden problem!

<Image src="/images/elastyczne-komponenty-react/puzzle.png" alt="" />

- **Skalowalno**

  Potrzebujemy doda nowy wariant przycisku, zmieni kolor tytuu, opisu itp. ? Nie ma problemu - dostosowujemy poszczeg贸lne komponenty.

### Wady

- **Nieprzewidywalno**

  Elastycznojest super, p贸ki kto czegoza bardzo nie namiesza. Co sistanie jeli programista postanowi wrzuci randomowego diva w rodek naszego komponentu? Czy stanie sicozego, czy jestemy przygotowani na takie sytuacje?

  <Image src="/images/elastyczne-komponenty-react/niechciany-children.png" alt="" />

  Czy mo偶emy jako temu zaradzi? Powiedzmy, 偶e korzystamy z TypeScripta, dziki kt贸remu mamy mo偶liwo otypowa dokadnienasze `children`... To by byo zbyt pikne.

  Obecnie nie ma dobrego sposobu, 偶e wskazaReactowi, 偶eby przyjmowa tylko okrelone dzieci. Co prawda mo偶emy zastosowa kilka "brudnych sztuczek", o kt贸rych pisaem w artykule [React Children & TypeScript - jak to ogarn?](https://frontlive.pl/blog/react-children-i-typescript), ale czy jest to warte naszej pracy?

- **Elementy stae**.

  Komponujemy poszczeg贸lne komponenty jeden po drugim w nadrzdnym komponencie `Modal`, wszystko jest cacy. Problem pojawia si, gdy w rodku `Modal` bdziemy potrzebowali umieci jaki dodatkowy kod.

  Tytu i opis maj by w jednym `div`, akcje w drugim itp. Rozwizanie? Doda wicej komponent贸w, kt贸re bdziemy przekazywa w `children`. Niestety wi偶 si to z tworzeniem nadmiarowego kodu w `JSX`.

  Czy mamy jeszcze jakie opcje? Moglibymy pokusi si o sprawdzanie poszczeg贸lnych `children`, ale ponownie, warto zada sobie pytanie, kiedy ma to sens. Nikt nie lubi nadmiarowego boilerplate'u.

## Co wybra?

Polecklasykiem:

<Image src="/images/elastyczne-komponenty-react/to-zalezy.png" alt="To zale偶y." />

1. **Nie ma zotego rodka**

   Ka偶de z tych rozwiza ma swoje wady i zalety. Czsto mieszamy je ze sob, w zale偶noci od konkretnych przypadk贸w.

   Du偶o zale偶y od skali komponentu. Inaczej mo偶emy potraktowa wikszy kawaek UI, a inaczej prosty przycisk.

2. **Dostosuj podejcie**

   W inny spos贸b bdziesz budowa bibliotek open source, a w inny wewntrzny zestaw komponent贸w.

   Jeli udostpniamy codo szerszego grona odbiorc贸w, warto postawi na **bardziej elastyczne** podejcie. W teorii nasz komponent mo偶e dziaa wietnie, w praktyce mog pojawi si nieoczekiwane przypadki brzegowe, gdzie sztywne podejcie mo偶e by bardzo ograniczajce. Z kompozycji korzystajpopularne biblioteki UI, np. [Radix](https://www.radix-ui.com/), [Headless UI](https://headlessui.com/), [Chakra](https://chakra-ui.com/) itp.

   Z drugiej strony, jeli pracujemy nad wewntrznym rozwizaniem, gdzie znamy wszystkie warianty komponentu, mo偶e warto rozwa偶y bardziej sztywne, dopasowane do naszych potrzeb rozwizanie. Niekoniecznie musi by to w 100% sztywna konfiguracja.

3. **Istotne jest to, jak zaczynamy**

   Naturalnym podejciem zdaje si rozpoczcie od przekazania props贸w, chleb powszedni React Developera. Jednak nie zawsze jest to dobre rozwizanie.

   Zaczynajc od kompozycji mo偶emy stworzy niskopoziomowe API komponentu, a nastpnie nadbudowa je sztywnkonfiguracj. Niestety nie dziaa to w drug stron.

   <Image src="/images/elastyczne-komponenty-react/hold-up.png" alt="To zale偶y." />

   W obu podejciach musimy pamita o jednym - odpowiednim poziomie abstrakcji. Zasada _Don't Repeat Yourself_ zakorzenia si w gowach programist贸w na stae. Czy susznie? Przy tworzeniu komponent贸w warto mie z tyu gowy to, 偶e [duplikacja jest czsto sporo "tasza" od niewaciwej abstrakcji](https://sandimetz.com/blog/2016/1/20/the-wrong-abstraction).

Do usyszenia!
