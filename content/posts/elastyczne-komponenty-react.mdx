---
title: 'Elastyczno komponent贸w w React - kompozycja vs konfigruacja'
category: 'React'
publishedAt: '04-08-2022'
isPublished: true
popular: false
image: '/images/elastyczne-komponenty-react/thumbnail.png'
excerpt: 'Design komponent贸w to wa偶ny aspekt budowania nowoczesnych UI. W jaki spos贸b tworzy wydajne i elastyczne komponenty w React?'
---

Design komponent贸w to wa偶ny aspekt budowania nowoczesnych UI. W jaki spos贸b tworzy wydajne i elastyczne komponenty w React?

## Komponent "Modal"

Zacznijmy od pozornie prostego modala. Taki komponent mo偶emy zaimplementowana dziesitki r贸偶nych sposob贸w, nie ma tego jednego, idealnego. Ja przedstawiCi niekt贸re z nich, skupiajc si na decyzjach i tradeoffach.

<Image src="/images/elastyczne-komponenty-react/modal.png" alt="" />

### Konfiguracja

Pierwsze co przychodzi nam na myl to stworzenie jednego, generycznego komponentu i przekazanie mu odpowiednich props贸w - **Keep It Simple, Stupid**.

```tsx
<Modal
  open={true}
  onClose={true}
  title="..."
  description="..."
  action={{
    name: '...',
    onClick: () => {},
  }}
/>
```

Przekazalimy stan komponentu i potrzebne wartoci. Mo偶na sirozje - zamykamy zadanie na Jirze i cieszymy siz szybkich efekt贸w 

Za jaki czas przychodzi do nas Project Manager i przekazuje zadanie, w kt贸rym do stworzenia jest kolejny modal. Tym razem nie bdzie tak atwo...

<Image src="/images/elastyczne-komponenty-react/error-modal.png" alt="" />

Poza standardowymi `title` i `description`, mo偶emy zauwa偶y, 偶e zamiast jednego przycisku, s dwa. Dodatkowo, nasz Designer postanowi doda przycisk do zamykania komunikatu. No nic, bierzemy sido pracy!

```tsx
<Modal
  open={true}
  onClose={true}
  header={{
    title: '...',
    icon: <CloseIcon />,
  }}
  description="..."
  actions={[
    {
      name: '...',
      onClick: () => {},
      variant: 'red',
    },
    {
      name: '...',
      onClick: () => {},
      variant: 'gray',
    },
  ]}
/>
```

Nasz komponent zaczyna znaczco rosn - API jest bardzo sztywne i ka偶de odstpstwo od pierwotnego designu bdzie siwizao z przekazywaniem kolejnych props贸w i wariant贸w.

Im wicej props贸w, tym zmniejsza siczytelno. Wraz z rozwojem takiego komponentu, mo偶emy doj do wniosku, 偶e czytelniej bdzie przekazacay **obiekt konfiguracyjny**:

```tsx
<Modal {...modalProps} />
```

Niestety jest to tylko "zalepka" na sedno problemu.

Podsumujmy podejcie oparte na bazie konfiguracji:

### Zalety

- Przewidywalno. API naszego komponentu jest jasne. Wiemy co musimy przekaza, 偶eby komponent dziaa prawidowo. Odwalamy cz pracy za programist- przeka偶 mi to i to, a ja dam Ci oczekiwany rezultat. Brak tutaj miejsca na bdy spowodowane nieprzekazaniem wymaganych wartoci.

<Image src="/images/elastyczne-komponenty-react/bezpieczne-propsy.png" alt="" />

### Wady

- To podejcie sinie skaluje. Jeli z czasem bd nam dochodzi kolejne warianty komponentu, czy elementy, kt贸re maj sipokazywa w zale偶noci od jakiegowarunku, to wyldujemy w kropce. Nasz `JSX` zacznie puchn, wic stwierdzimy, 偶e czytelniej bdzie przekazywa cay "obiekt konfiguracyjny", ale czy na pewno rozwizuje nasz problem?

<Image src="/images/elastyczne-komponenty-react/obiekt-konfiguracyjny.png" alt="" />

- Problem pojawia sir贸wnie偶 wtedy, gdy chcemy zmieni uo偶enie pewnych element贸w. Przyciski w danym wariancie powinny by uo偶one nieco inaczej? Pyk, dodajemy kolejne propsy.

- W pewnych przypadkach nie chcemy wywietla `description`? Oczywicie jestemy w stanie to zrobi, ale jakim kosztem? Mo偶emy zapomnie wtedy o "sztywnym" podejciu i trzymaniem programisty "za mord", bo w kocu pewne propsy nie s wymagane.

<Newsletter />

## Kompozycja

We藕my na tapet rozwizanie zupenie inne od pierwotnego. Skorzystajmy z mechanizmu `children` i zamiemy nasze propsy na reu偶ywalne komponenty:

```tsx
<Modal open={true} onClose={true}>
  <Modal.Header>
    <Modal.Title>...</Modal.Title>
    <CloseIcon />
  </Modal.Header>
  <Modal.Description>...</Modal.Description>
  <Modal.ActionsGroup>
    <Modal.Action variant="red" onClick={() => {}}>
      ...
    </Modal.Action>
    <Modal.Action variant="red" onClick={() => {}}>
      ...
    </Modal.Action>
  </Modal.ActionsGroup>
</Modal>
```

> Notacja z kropk jest cakowicie opcjonalna. Jest czsto wykorzystywana przez tw贸rc贸w bilbiotek jako pewna konwencja nazewnicza.

Korzystamy tutaj z wyselekcjonowanych komponent贸w, kt贸re sskrojone pod nasz konkretny komponent. Ka偶dy puzel takiej ukadanki mo偶e mie wasne propsy i `children`.

### Zalety

- **Elasyczno**. Nie chcemy wywietla jakiego komponentu w danej sytuacji? Pyk, robimy warunek w `JSX` i po problemie.

<Image src="/images/elastyczne-komponenty-react/puzzle.png" alt="" />

- **Skalowalno**. Potrzebujemy doda nowy wariant przycisku, zmieni kolor tytuu, opisu itp. ? Nie ma problemu - dostosowujemy poszczeg贸lne komponenty.

- Chcemy zmieni kolejno wywietlania poszczeg贸lnych element贸w? 呕aden problem!

### Wady

- **Nieprzewidywalno**. Elastycznojest super, p贸ki kto czegoza bardzo nie namiesza. Co sistanie jeli programista postanowi wrzuci randomowego diva w rodek naszego komponentu? Czy stanie sicozego, czy jestemy przygotowani na takie sytuacje?

  <Image src="/images/elastyczne-komponenty-react/niechciany-children.png" alt="" />

  Czy mo偶emy jako temu zaradzi? Powiedzmy, 偶e korzystamy z TypeScripta, dziki kt贸remu mamy mo偶liwo otypowa dokadnienasze `children`... To by byo zbyt pikne. Obecnie nie ma dobrego sposobu, 偶e wskazaReactowi, 偶eby przyjmowa tylko okrelone dzieci. Co prawda mo偶emy zastosowa kilka brudnych szcztuczek, o kt贸rych pisaem w artykule [React Children & TypeScript - jak to ogarn?](https://frontlive.pl/blog/react-children-i-typescript), ale czy jest to warte naszej pracy?

- Za贸偶my jeszcze jeden przypadek - wikszo naszego komponentu ma byelastyczna, ale gdzie tam wrodku chcemy mie **elementy stae**, co wtedy? Jak rozmiecimy poszczeg贸lne czci w komponencie `Modal`?

## Sztywa kompozycja aka "Slots Pattern"

Na sam koniec hybryda, czyli swoiste poczenie konfiguracji z kompozycj.

```tsx
<Modal
  open={true}
  onClose={true}
  header={
    <Modal.Header>
      <Modal.Title>...</Modal.Title>
      <CloseIcon />
    </Modal.Header>
  }
  description={<Modal.Description>...</Modal.Description>}
  actions={
    <Modal.ActionsGroup>
      <Modal.Action variant="red" onClick={() => {}}>
        ...
      </Modal.Action>
      <Modal.Action variant="red" onClick={() => {}}>
        ...
      </Modal.Action>
    </Modal.ActionsGroup>
  }
/>
```

Korzystamy tutaj zar贸wno z props贸w, jak i z reu偶ywalnych, rozszerzalnych komponent贸w. Co nam daje (i odbiera) takie podejcie?

### Zalety

- Podobnie jak w przypadku konfiguracji m贸wimy dokadnie programicie co powinno si tutaj znale藕, 偶eby komponent dziaa poprawnie.

- Mamy wiele mo偶liwoci na rozbudow takiego komponentu. Nowy wygld przycisku? Nie ma sprawy, dodajemy odpowiednie waciwoci dla danego komponentu.

- To rozwizanie sprawdza si w naszym przypadku, gdzie pewn cz komponentu chcemy mieelastyczn, a czsztywn, w rodku samego `Modal`. Wtedy nie odczuwamy wspomnianego wczeniej ograniczenia, po prostu ukadamy kolejne klocki w naszym `JSX`

### Wady

- Z jednej strony otrzymujemy sztywnkonfiguracje, a z drugiej nadal przejmujemy wady z podejcia opartego o czyst kompozycj. Do propsa `header` mo偶emy przekaza zupenie inny komponent, ni偶 bymy oczekiwali.

- Otrzymujemy mo偶liwoumieszczenia komponent贸w w konkretnym miejscu w rodku `JSX` - to plus. Wi偶sito jednak z tym, 偶e jestemy zamknici na jeden specyficzny layout, nie mamy mo偶liwoci swobodnego przemieszczania komponent贸w.

## Co wybra?

Polecklasykiem:

<Image src="/images/elastyczne-komponenty-react/to-zalezy.png" alt="" />

Podsumujmy, co wic warto wybra? Odpowied藕 mo偶e by tylko jedna - to zale偶y!

Jak widzisz ka偶de z tych rozwiza ma swoje wady i zalety, **nie ma zotego rodka**. Czsto mieszamy te rozwizania ze sob. Tworzymy np. niskopoziomowe API komponentu bazujce na kompozycji, a nastpnie nadbudowujemy je sztywnkonfiguracj, w zale偶noci od konkretnych przypadk贸w.

Wa偶ne, 偶eby **dostosowa** podejcie do projektu, w kt贸rym pracujemy. Inaczej bdziemy budowa bilbiotek open source, a inaczej nasz wewntrzy zestaw komponent贸w.

Jeli udostpniamy codo szerszego grona odbiorc贸w, warto postawi na **bardziej elastyczne** podejcie. Z kompozycji korzystajpopularne bilbioteki UI, np. [Radix](https://www.radix-ui.com/), [Headless UI](https://headlessui.com/), [Chakra](https://chakra-ui.com/) itp.

Z drugiej strony, jeli pracujemy nad wewntrzym, stricte domenowym rozwizaniem, gdzie znamy wszystkie warianty komponentu, warto rozwa偶y bardziej sztywne, dopasowane do naszych potrzeb rozwizanie.

Do usyszenia!
