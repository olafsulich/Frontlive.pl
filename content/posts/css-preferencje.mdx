---
title: 'Preferencje u偶ytkownika a CSS, na co warto zwracauwag?'
category: 'CSS'
publishedAt: '08-11-2021'
isPublished: true
popular: true
image: '/images/css-preferencje/thumbnail.png'
excerpt: 'Suchaj swoich u偶ytkownik贸w. Ta porada jest jednz najwa偶niejszych, jeli chcemy usprawni User Experience naszej aplikacji...'
---

Suchaj swoich u偶ytkownik贸w. Ta porada jest jednz najwa偶niejszych, jeli chcemy usprawni User Experience naszej aplikacji. Jak przez pryzmat preferencji u偶ytkownika dostosowywa swoje produkty korzystajc z nowoczesnych media queries?

## Ograniczenia ruchu

Animacje, bo o nich mowa, najczciej nie s niczym zym - czsto poprawiaj wra偶enia z korzystania z naszej strony. No ale jak to ju偶 bywa w programowaniu, nic nie jest czarno-biae. Niekt贸rzy u偶ytkownicy nie chc bd藕 **nie mog** patrze np. na szybko poruszajce si elementy na stronie. Tacy u偶ytkownicy czsto borykaj siz niepenosprawnociami poznawczymi...

<Image
  src="/images/css-preferencje/ja-lubie-wolmo.png"
  alt="Kuce z bronksu - ja lubie szypko, a ja lubie wolmo"
/>

Na szczcie jest na to spos贸b! Mo偶emy skorzystaz preferencji ograniczenia ruchu i oszczdzi b贸lu gowy naszym u偶ytkownikom. Jak to dziaa? U偶ytkownik wcza w systemie operacyjnym opcje redukowania ruchu, a my wykrywamy to z pomoc specjalnych _media queries_.

W `@prefers-reduced-motion` mo偶emy rozr贸偶ni dwa stany - `no-preference` i `reduce`. Za贸偶my, 偶e na naszej stronie chcemy mie box, kt贸ry bdzie siobraca w konkretny spos贸b przez p贸torej sekundy:

```css
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.box {
  animation: spin 1.5s linear infinite both;
}
```

Aby usun animacje, gdy ograniczenia ruchu bd ustawione na `reduce`, wystarczy zrobi:

```css
@media screen and (prefers-reduced-motion: reduce) {
  .box {
    animation: none;
  }
}
```

Warto pamita, 偶e `@prefers-reduced-motion` nie ogranicza nas w 偶adnym stopniu. Nie musimy r贸wnie偶 kasowa caej animacji, mo偶emy j tylko**zredukowa**, o ile i w jaki spos贸b, to ju偶 zale偶y od konkretnego przypadku.

Kolejnym praktycznym zastosowaniem dla tego media query mo偶e by odtwarzanie filmu. Jak mo偶e wiesz, _autoplay_ nie jest uznawany za dobrpraktyk,jeli chodzi o video. Niestety czasem "nie mamy wyboru" i musimy umieci film na stronie, kt贸ry bdzie autoodtwarzany, najczciej w formie jakiegota.

<Image
  src="/images/css-preferencje/autoplay.png"
  alt="Por贸wnanie wygldu odtwarzacza wideo z i bez ogranicze ruchu"
/>

```html
<video src="..." type="video/mp4" controls />
```

Chcemy, aby nasz film odtwarza si automatycznie, jeli warto `@prefers-reduced-motion` w systemie jest ustawiona na `no-preference`. Jeli u偶ytkownik bdzie chcia mie zredukowany ruch, zatrzymamy autoodtwarzanie. Jak to ogarn? Wystarczy nam kilka linijek w JS:

```js
const video = document.querySelector('video');

// Sprawdzamy, czy ruch jest zredukowany
const isReducedMotionEnabled = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

if (isReduceMotionEnabled) {
  // Jeli tak, wywalamy atrybut autoplay
  video.setAttribute('autoplay', false);
} else {
  // Jeli nie, ustawiamy odtwarzanie na automatyczne
  video.setAttribute('autoplay', true);
}
```

<Newsletter />

## Preferencje motywu

Na pewno znane Ci _dark_ i _light_ themes oraz odwieczna wojna u偶ytkownik贸w i programist贸w o to, kt贸ry z nich jest lepszy w przegldarce, na stronie internetowej, a kt贸ry w IDE...

<Image src="/images/css-preferencje/dark-and-white-theme.png" alt="" />

Kt贸rstron obra? _Jeli mam wybiera midzy zem a zem..._ Najlepiej nie wybiera wcale i przygotowa dwie wersje tak, aby ka偶dy by zadowolony. Dziki `@prefers-color-scheme` mamy mo偶liwo wykrycia preferowanego motywu w systemie:

```css
:root {
  --color-background: #ffffff;
  --color-text: #000000;
}

@media screen and (prefers-color-scheme: dark) {
  :root {
    --color-background: #000000;
    --color-text: #ffffff;
  }
}
```

Do wyboru mamy opcje `dark` i `light`. Przy obsudze wicej ni偶 jednego motywu (i nie tylko) Twoim najlepszym przyjacielem bd **CSS Variables**. Jeli jeszcze o nich nie syszae, to sprawd藕 koniecznie [m贸j artyku na ten temat.](https://frontlive.pl/blog/css-variables)

## Redukowanie danych

Chocia偶 ci偶ko w to uwierzy, ale w 2021 roku, niekt贸rzy u偶ytkownicy internetu, mognie mie szybkiego cza internetowego lub maj cile okrelony transfer do wykorzystania. Takie osoby mogchcie zredukowailo pobieranych danych ze wzgldu na oszczdno ich zasob贸w. Z pomoc przychodzi `@prefers-reduced-data`.

We藕my za przykad twitterowy post, normalnie, poza samtreci, wywietlane jest jeszcze zdjcie profilowe u偶ytkownika oraz u niekt贸rych etykieta zweryfikowanego usera.

<Image src="/images/css-preferencje/tweet.png" alt="" />

W naszym przypadku, gdy u偶ytkownik ustawi warto media query na `reduce`, chcielibymy wywietla tylko najwa偶niejsze informacje, czyli autora i tre posta, bez zbdnych zdj, tak aby ograniczy transfer do minimum.

```css
.avatar {
}
.approved-icon {
}
.code-snippet {
}

@media screen and (prefers-reduced-data: reduce) {
  .avatar,
  .approved-icon,
  .code-snippet {
    display: none;
  }
}
```

Oczywicie takie rozwizanie nie jest idealne... Czsto obrazki w tweetach s niezbdne do zrozumienia przekazu caego posta, wic fajnie by byo wrzuci tutaj chocia偶by tekst alternatywny.

Innym, bardziej uniwersalnym przypadkiem, mo偶e by **adowanie font贸w**. Czsto na swoje strony adujemy wiele r贸偶nych, customowych font贸w. Dla u偶ytkownik贸w, kt贸rzy chc zu偶ywa jak najmniej danych, dobr opcj bdzie zastpienie niestandardowych, tymi systemowymi:

```css
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif,
    'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
}

@media (prefers-reduced-data: no-preference) {
  @font-face {
    font-family: LeagueMono;
    src: url('/fonts/LeagueMono-Regular.woff2') format('woff2');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
  }

  body {
    font-family: 'LeagueMono';
  }
}
```

> `@prefers-reduced-data` jest obecnie w bardzo wczesnej fazie rozwoju, wsparcie dla tej media query mo偶esz ledzi na [Can I Use](https://caniuse.com/?search=prefers-reduced-data).

### Ustawienia kontrastu

Minimalny kontrast pomidzy tekstem a tem okrela standard WCAG 2.0, jest on podzielony na dwa poziomy:

- **AA** - dla normalnego tekstu kontrast powinien wynosi przynajmniej 4.5:1
- **AAA** - dla normalnego tekstu kontrast powinien wynosi przynajmniej 7:1

Jak to si ma do naszych preferencji kontrastu? Dziki `@prefers-contrast` mo偶emy wykry, 偶e u偶ytkownik potrzebuje wicej kontrastu i na bazie tego podbi kontrast z poziomu `AA` do `AAA`:

```css
/* Kontrast 4.59:1, poziom AA */
.box {
  background-color: #ffffff;
}

.text {
  color: #387e94;
}

/* Kontrast 21:1, poziom AAA */
@media (prefers-contrast: more) {
  .box {
    background-color: #000000;
  }

  .text {
    color: #ffffff;
  }
}
```

Preferencje kontrastu to nie tylko kolory! Zamiast zmieniaich poziom, mo偶emy dostosowa inne elemnty UI, taki jak np. _border_, aby byy bardziej wyraziste:

```css
.box {
  outline: 2px dashed black;
}

@media (prefers-contrast: more) {
  .box {
    outline: 2px solid black;
  }
}
```

> `@prefers-contrast` jest obecnie w bardzo wczesnej fazie rozwoju, wsparcie dla tej media query mo偶esz ledzi na [Can I Use](https://caniuse.com/?search=prefers-contrast).

## Zredukowana transparento

Last but not least - czyli preferencje dotyczce transparentnoci. Dziki `@prefers-reduced-transparency` mo偶emy wskaza, w jakim stopniu dany element UI bdzie transparenty:

```css
.box {
  background: #000000;
  opacity: 0.5;
}

@media (prefers-reduced-transparency: reduce) {
  .box {
    opacity: 1;
  }
}
```

> `@prefers-reduced-transparency` jest obecnie w bardzo wczesnej fazie rozwoju, wsparcie dla tej media query mo偶esz ledzi na [Can I Use](https://caniuse.com/?search=prefers-reduced-transparency).

## Podsumowanie

To by byo na tyle, jeli chodzi o preferencje u偶ytkownika w CSS  Wedug mnie najwa偶niejsz z nich jest ta pierwsza, ograniczenia ruchu to co, co powiniene mie na swojej stronie, jeli korzystasz z animacji!

Celowo pominem jednpreferencje - [forced-colors](https://drafts.csswg.org/mediaqueries-5/#forced-colors). Jest ona wedug mnie tak abstrakcyjna, 偶e nie znalazem 偶adnego sensownego wytumaczenia na jej u偶ycie  Jeli przychodzi Ci jakie do gowy, to koniecznie daj zna.

Do usyszenia!

### 殴r贸da

- [CSS Spec](https://drafts.csswg.org/mediaqueries-5/#mf-user-preferences)
- [MDN](https://developer.mozilla.org/en-US/)
