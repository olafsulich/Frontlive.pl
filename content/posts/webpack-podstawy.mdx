---
title: 'Webpack 4 - pierwsze kroki z module bundlerem'
category: 'Webpack'
publishedAt: '12-06-2020'
popular: false
excerpt: 'Webpack to tzw. module bundler, pozwala nam na budowanie drzewa zale偶noci, kt贸re ma na celu poczenie wielu modu贸w naszej aplikacji w jeden pakiet.'
---

Cze 

Webpack to tzw. **module bundler**, pozwala nam na budowanie drzewa zale偶noci, kt贸re ma na celu poczenie wielu **modu贸w** naszej aplikacji w jeden pakiet.

## Dlaczego webpack?

Mamy dwie mo偶liwoci, 偶eby uruchomi nasz JavaScriptow aplikacj w przegldarce. Mo偶emy dla ka偶dej funkcjonalnoci docza `<script>` lub zawrze cay kod w jednym pliku `.js`. Takie rozwizania, jak zapewn si domylasz, rodz wiele problem贸w, czy to z **czytelnoci**, **rozmiarem**, czy te偶 **utrzymaniem naszego kodu**.

Zanim stworzono Webpacka, powstay rozwizania, kt贸re **czciowo** rozwizay powy偶sze problemy, niekt贸re z nich rodziy te偶 nowe.

Dlatego powsta Webpack, pozwala on nie tylko bundlowa pliki `.js`, ale r贸wnie偶 wspiera inne tzw. assety jak **obrazki**, **fonty** i **arkusze styl贸w**.

Jest to bardzo **pot偶ne** narzdzie i w dobie nowoczesnych stron i aplikacji **nie wyobra偶am** sobie pracy bez niego(lub jemu podobnych).

## Zao偶enia

Webpack opiera si o kilka koncept贸w:

- Entry
- Output
- Loaders
- Plugins
- Mode

Bez zbdnego teoretyzowania, **przejd藕my do praktyki**, p贸藕niej przyjrzymy im si nieco bli偶ej.

## Instalacja

Utw贸rzmy nowy projekt, zainicjujmy nasz aplikacj.

```bash
npm init
```

Po wstpnej konfiguracji zainstalujmy niezbdne paczki:

```bash
npm install --save-dev webpack webpack-cli
```

## Pierwszy modu!

Na pocztek nie potrzebujemy **偶adnego pliku** konfiguracyjnego, wystarcz nam tylko skrypty, a waciwie jeden:

```json
"scripts": {
    "webpack": "webpack",
  },
```

Utw贸rzmy teraz katalog `src/`, a w nim plik `index.js` i `hello.js`.

```js
// hello.js

const hello = 'Hello world!';

export default hello;

// index.js
import hello from './hello.js';

console.log(hello);
```

W pliku `hello.js` stworzylimy sta `hello` i wyeksportowalimy j, nastpnie w `index.js` importujemy t sta i po prostu j wylogowujemy.

> Jeli nie wiesz czym s moduy w JavaScripcie, skorzystaj z [tego materiau](http://kursjs.pl/kurs/es6/moduly.php)!

Odpalmy teraz nasz skrypt i zobaczmy co si stanie:

```bash
npm run webpack
```

Jeli wszystko poszo zgodnie z planem powiniene zobaczy **nowy folder** w katalogu g贸wnym - `dist/`, a w nim plik `main.js`. Tutaj zostay zbundlowane nasze pliki `hello.js` i `index.js`.

Za pomoc `node` odpalmy nasz skrypt:

```bash
node ./dist/main.js
```

W odpowiedzi dostajemy **Hello world!**, brawo wanie napisae sw贸j pierwszy modu!

## Dodawanie skrypt贸w

Webpack daje nam jednak ostrze偶enie o braku odpowiedniego trybu, by default ustawiony jest `mode production`. Dodajmy odpowiednie skrypty:

```json
"scripts": {
    "webpack": "webpack",
    "dev": "npm run webpack -- --mode development --watch",
    "prod": "npm run webpack -- --mode production"
  },
```

Dziki fladze `--watch` Webpack bdzie _obserwowa_ zmiany w naszych plikach.

Odpalmy nasz skrypt developerski:

```bash
npm run dev
```

Stw贸rzmy teraz plik `multiply.js` w `src/`, a w nim funkcj `multiplyByTwo`:

```js
// multiply.js

const multiplyByTwo = (number) => {
  return number * 2;
};

export { multiplyByTwo };
```

Zaimportujmy j teraz do `index.js` i wylogujmy z argumentem `2`.

```js
// index.js
import hello from './hello.js';
import { multiplyByTwo } from './multiply.js';

console.log(hello, multiplyByTwo(2));
```

Jeli spojrzysz teraz do terminala, to zobaczysz **drzewko zale偶noci**, o kt贸rym Ci wczeniej wspominaem.

Odpalmy teraz tryb produkcyjny:

```bash
npm run prod
```

Zbundlowalimy nasze pliki, zobaczmy czy wszystko poszo dobrze:

```bash
node ./dist/main.js
```

W odpowiedzi powiniene dosta `Hello world! 4`.

## Konfiguracja

Okej, teraz przysza pora na bardziej skomplikowan konfiguracj, mamy kilka mo偶liwoci. Pierwsza, mo偶liwe, 偶e ju偶 Ci znana, to stworzenie pliku `webpack.config.js`, mo偶emy r贸wnie偶 skorzysta z [CLI](https://webpack.js.org/api/cli/), ale my skupimy si na tej pierwszej opcji.

```bash
touch webpack.config.js
```

Zanim stworzymy nasz webpackow konfiguracj, om贸wmy sobie pokr贸tce czym s, wspomniane przeze mnie wczeniej, **zao偶enia**, na kt贸rych opiera si caa praca z Webpackiem.

### Entry

Wyobra藕 sobie drzewko swoich plik贸w, na samej g贸rze takiego drzewka mamy nasz `entry point`, dokadnie tym by nasz `index.js`. Ten plik _zasila_ nasz aplikacj.

W pliku konfiguracyjnym plik wejciowy definiujemy w ten spos贸b:

```js
module.exports = {
  entry: './index.js',
};
```

### Output

Webpack bierz nasz plik z `entry pointa` i _przemiela_ go na zbundlowan wersj, taki _przemielony_ kod musi gdzie _wyplu_.

Takim miejscem jest wanie `output`. W konfiguracji potrzebujemy poda cie偶k i nazw dla zbundlowanego pliku.

```js
module.exports = {
  output: {
    path: './dist',
    filename: 'bundle.js',
  },
};
```

### Loaders & rules

Kolejnym konceptem w Webpacku s tzw. **loadery**, dziki nim Webpack wie **jak i kt贸re** pliki zmieni przed dodaniem ich do drzewa zale偶noci.

Chcemy u偶y Babela, TypeScripta, czy te偶 bundlowa pliki css? Nie ma problemu, dodajmy odpowiednie **loadery** do naszej konfiguracji:

```js
module.exports = {
  rules: [
    { test: /\.js$/, use: 'babel-loader' },
    { test: /\.ts$/, use: 'ts-loader' },
    { test: /\.css$/, use: 'css-loader' },
  ],
};
```

Gdy nasz plik bdzie odpowiada zadeklarowanym **rozszerzeni**, Webpack **przetrasformuje** go za pomoc danego **loadera**, zanim doda go do drzewa zale偶noci.

### Plugins

Webpack zosta zbudowany wanie na **pluginach**! Pluginy to takie **supermoce** Webpacka, maj wiksze mo偶liwoci ni偶 loadery, dziki nim mo偶emy wpywa na proces kompilacji.

Tak jak loadery, pluginy musimy najpierw zainstalowa a potem doda od naszego configu:

```js
const MinifyPlugin = require('babel-minify-webpack-plugin');
module.exports = {
  plugins: [new MinifyPlugin(minifyOpts, pluginOpts)],
};
```

Ka偶dy plugin ma swoje wasne opcje, jednak ka偶dy z nich podobnie jak klasy w js, plugin dodajemy **tworzc jego now instancj**.

## Podsumowanie

To tyle na dzi, przedstawiem Ci podstawowe zao偶enia Webpacka, w nastpnym wpisie stworzymy ju偶 **penoprawn konfiguracj** z wykorzystaniem loader贸w, plugin贸w i innych d贸br jakie daje nam to wspaniae narzdzie.

Cay kod mo偶ecie znale藕 na [githubie](https://github.com/Frontlive/webpack-pierwsze-kroki).

Do usyszenia!

### 殴r贸da

- [Webpack docs](https://webpack.js.org/)
