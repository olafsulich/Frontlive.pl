---
title: 'Firebase - dodawanie danych do Firestore'
category: 'Firebase'
publishedAt: '29-03-2020'
popular: false
excerpt: 'Poznaj techniki obsugi Firestore, stw贸rzmy aplikacj z naszymi ulubionymi tw贸rcami!'
---

## Okej, a co jeli chciabym co doda?

Ostatnio utworzylimy prost baz danych, z kt贸rej pobieralimy dane. Dzi dowiesz si, jak te dane dodawa.
**Let's go!**

## Co powiniene wiedzie?

呕eby wycign z tego artykuu 100%, powiniene swobodnie porusza si po Reactcie.

- Mie w maym palcu [HTML & CSS](https://tutorials.comandeer.pl/html5-blog.html).
- By obeznanym ze standardami [ES6+](https://www.youtube.com/watch?v=eA2YRceiDwk).
- Rozumie [Reactowe Hooki](https://reactjs.org/docs/hooks-intro.html)
- Posiada podstawow wiedz ze [Styled Components](https://styled-components.com/)
- Zaznajomi si z poprzednimi wpisami o Firebase.

> Jeli te zagadnienia s Ci obce, nie martw si! Firebase mo偶esz r贸wnie偶 wykorzysta bez znajomoci Reacta.

## Sowem wstpu

呕eby nie traci czasu na budowanie bazy danych od zera, skorzystam z tej **stworzonej w poprzednim wpisie**.

Bdziemy r贸wnie偶 rozwija nasz projekt o ulubionych tw贸rcach, mo偶esz go znale藕 [tutaj](https://www.frontlive.pl/pobieranie-danych-z-firestore/)

> Jeli jeste nowy w Firebase, mo偶esz zajrze do [pierwszego artykuu](https://www.frontlive.pl/autoryzacja-w-firebase/)

## Przygotowanie komponentu

Stw贸rzymy teraz podstawowy widok komponentu w **AddCreator.js**

```js
import React from 'react';
import styled from 'styled-components';

const StyledForm = styled.form`
  width: 100%;
  height: 50vh;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  font-family: 'Montserrat';
`;

const StyledWrapper = styled.div`
  width: 100%;
  height: 30%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
`;

const StyledLabel = styled.label`
  width: 25.5rem;
  text-align: left;
  font-size: 1.2rem;
  padding: 1rem 0;
`;

const StyledInput = styled.input`
  width: 24rem;
  font-size: 1rem;
  background-color: hsla(204, 26%, 96%, 1);
  padding: 15px 20px;
  border: none;
  outline: none;
  margin-bottom: 1rem;

  :placeholder {
    letter-spacing: 1px;
    color: hsla(0, 0%, 33%, 0.5);
  }
`;

const StyledButtonsWrapper = styled.div`
  width: 25.5rem;
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
  margin-top: 4rem;
`;

const StyledButton = styled.button`
  color: #fff;
  font-size: 1.1rem;
  background-color: #ffbb4a;
  width: 100%;
  height: 3rem;
  padding: 0.5rem;
  border: none;
`;

const AddCreator = () => {
  return (
    <StyledForm>
      <StyledWrapper>
        <StyledLabel htmlFor="photo">Zdjcie</StyledLabel>
        <StyledInput
          placeholder="https://adres-zdjecia.png"
          id="photo"
          type="text"
          name="photo"
          required
        />
      </StyledWrapper>
      <StyledWrapper>
        <StyledLabel htmlFor="name">Nazwa</StyledLabel>
        <StyledInput placeholder="Olaf Sulich" id="name" type="text" name="name" required />
      </StyledWrapper>
      <StyledWrapper>
        <StyledLabel htmlFor="website">Strona internetowa</StyledLabel>
        <StyledInput
          placeholder="https://www.frontlive.pl/"
          id="website"
          type="text"
          name="website"
          required
        />
      </StyledWrapper>
      <StyledButtonsWrapper>
        <StyledButton type="submit" name="dodaj">
          dodaj
        </StyledButton>
      </StyledButtonsWrapper>
    </StyledForm>
  );
};

export default AddCreator;
```

## Zarzdzanie statem za pomoc useReducer

Do zarzdzania stanem wykorzystamy, znanego z pierwszego wpisu, hooka [useReducer](https://pl.reactjs.org/docs/hooks-reference.html#usereducer).

Tworzymy hooka, a w nim podajemy wartoci: photo, name, website:

```js
const [inputsContent, setInputsContent] = useReducer(
  (state, newState) => ({ ...state, ...newState }),
  {
    photo: '',
    name: '',
    website: '',
  },
);
const { photo, name, website } = inputsContent;
```

U偶yjemy [destrukturyzacji](https://developer.mozilla.org/pl/docs/Web/JavaScript/Referencje/Operatory/Destructuring_assignment), 偶eby je wycign.

### Uaktualnianie stanu

Do uaktualniania stanu potrzebujemy prostej funkcji, przypisuje ona **name** do **value**, sam zobacz:

```js
const handleInputChange = (e) => {
  setInputsContent({
    [e.target.name]: e.target.value,
  });
};
```

## Dodawanie danych

W komponencie `App,js`, stw贸rzmy funkcj, kt贸ra jako argument przyjmie objekt.

`creatorsCollection`, jak mo偶esz kojarzy z poprzedniego wpisu, to odwoanie do naszej kolekcji w `Firestore`.

Za pomoc metody [add](https://firebase.google.com/docs/firestore/manage-data/add-data) dodajmy naszego nowego tw贸rce.

Na koniec ustawiamy w hooku `setCreators` tabilc do kt贸rej przekazujemy nowego tw贸rc i za pomoc [spread operator](https://developer.mozilla.org/pl/docs/Web/JavaScript/Referencje/Operatory/Spread_operator) rozsmarowujemy pozostaych tw贸rc贸w(jakkolwiek to brzmi ( 汀掳  汀掳)).

```js
const handleCreate = (creatorToAdd) => {
  creatorsCollection.add(creatorToAdd);
  setCreators([creatorToAdd, ...creators]);
};
```

Okej, przechodzimy do komponentu `AddCreator` i piszemy funkcj `handleSubmit`.

Tworzymy objekt `newCreator`, a w nim korzystamy z wartoci naszego stanu.

Wykorzystujemy funkcj `handleCreate` z **App.js** i podajemy do niej objekt `newCreator`.

Na koniec, mo偶emy wyczyci wartoci p贸l.

```js
const handleSubmit = (e) => {
  e.preventDefault();
  const newCreator = {
    photo,
    name,
    website,
  };
  handleCreate(newCreator);
  setInputsContent({
    photo: '',
    name: '',
    website: '',
  });
};
```

> Nie zapomnij o przypisaniu **value** i funkcji **handleChange** do swoich input贸w oraz o zacigniciu z props贸w **handleCreate**

## Sortowanie listy

Jeli udao Ci si doda swojego ulubionego tw贸rce, to **super**!

Zosta nam ostatni krok, posortowa alfabetycznie list tw贸rc贸w.

Przechodzimy o `App.js` i do naszej subskrybcji dodajemy metod [orderBy](https://firebase.google.com/docs/firestore/query-data/order-limit-data)

Mo偶esz sortowa wyniki po ka偶dym polu w dokumencie, podajc nazw pola jako pierwszy argument [orderBy](https://firebase.google.com/docs/firestore/query-data/order-limit-data), drugi argument to typ sortowania `desc` lub `asc`, my u偶yjemy `asc`.

**orderBy** posiada jeszcze par innych ficzer贸w, jeli chcesz si dowiedzie wicej kilknij [tutaj](https://firebase.google.com/docs/firestore/query-data/order-limit-data).

Komponent `App.js`:

```js
 ...
useEffect(() => {
    const subscribe = creatorsCollection
      .orderBy("name", "asc")
      .onSnapshot(snapshot => {
        const dataFromCollection = snapshot.docs.map(documentsCollection);
        setCreators(dataFromCollection);
      });
    return () => subscribe;
  }, []);
 ...
```

## Voil! 

Dziki za wytrwanie do koca!

Mam nadziej, 偶e po dzisiejszym wpisie `Firestore` dla Ciebie to ju偶 buka z masem!

Mo偶esz teraz doda **swoich ulubionych tw贸rc贸w** 猸锔.

Cay kod znajdziesz [tutaj](https://codesandbox.io/s/boring-saha-o98h7), pamitaj tylko o podmienieniu danych konfiguracyjnych w pliku `firebase.js`.

Do usyszenia!
